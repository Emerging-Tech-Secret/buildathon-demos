Object.defineProperty(exports,"__esModule",{value:!0}),exports.initModalMoreAccess=initModalMoreAccess,exports.menuLogin=menuLogin,exports.onLoad=onLoad;var modal=document.getElementById("modal-login-more-access"),moreAccessModule=document.getElementById("idl-login-more-access"),allFocusableModalItens=[],focusableLangModalItems=[],moreAccessOpen=!1,moreAccessExpanded=!1,selectMoreAccess=document.getElementById("idl-more-access-select-login"),agencyMoreAccess=document.getElementById("idl-more-access-container-agency"),accountMoreAccess=document.getElementById("idl-more-access-container-account"),cpfMoreAccess=document.getElementById("idl-more-access-container-cpf"),operatorMoreAccess=document.getElementById("idl-more-access-container-operator"),agencyInputMoreAccess=document.getElementById("idl-more-access-input-agency"),accountInputMoreAccess=document.getElementById("idl-more-access-input-account"),cpfInputMoreAccess=document.getElementById("idl-more-access-input-cpf"),operatorInputMoreAccess=document.getElementById("idl-more-access-input-operator"),moreAccessText=document.getElementById("idl-more-access-text"),rememberContainerMoreAccess=document.getElementById("idl-more-access-container-remember"),rememberInputMoreAccess=document.getElementById("idl-more-access-input-remember"),btnSubmit=document.getElementById("idl-more-access-submit-button"),btnOpenZoom=document.getElementById("open-modal-more-access-zoom"),main=document.getElementById("main"),footer=document.getElementById("footer");function initModalMoreAccess(){document.getElementById("open_modal_more_access").addEventListener("click",openModal),btnOpenZoom.addEventListener("click",openModal),document.getElementById("close-modal-more-access").addEventListener("click",closeModal),selectMoreAccess&&selectMoreAccess.addEventListener("change",function(){generateFocusableItens(),resetDisplay()}),loadLocalStorage("agencia","idl-more-access-input-agency","idl-more-access-container-agency"),loadLocalStorage("conta","idl-more-access-input-account","idl-more-access-container-account"),loadLocalStorage("operador","idl-more-access-input-operator","idl-more-access-container-operator"),loadLocalStorage("cpf","idl-more-access-input-cpf","idl-more-access-container-cpf"),btnSubmit&&btnSubmit.addEventListener("click",function(e){switch(e.preventDefault(),1==rememberInputMoreAccess.checked?(localStorage.setItem("agencia",agencyInputMoreAccess.value),localStorage.setItem("conta",accountInputMoreAccess.value),localStorage.setItem("operador",operatorInputMoreAccess.value),localStorage.setItem("cpf",cpfInputMoreAccess.value)):0==rememberInputMoreAccess.checked&&(localStorage.removeItem("agencia"),localStorage.removeItem("conta"),localStorage.removeItem("operador"),localStorage.removeItem("cpf")),selectMoreAccess.value){case"agency-account":setAgency(agencyInputMoreAccess.value,accountInputMoreAccess.value);break;case"operator":setOperatorCode(operatorInputMoreAccess.value);break;case"cpf":setCPF(cpfInputMoreAccess.value);break;case"more-access":window.location.href="https://www.itau.com.br/servicos/mais-acessos";break;default:return!1}})}function loadLocalStorage(e,t,o){e=localStorage.getItem(e);e&&0<e.length&&document.getElementById(t)&&(document.getElementById(t).value=e,document.getElementById(o).querySelector(".ids-form-field").classList.add("ids-form-field--value"))}function setAgency(e,t){var o=document.getElementById("more-access-bankline-ag-cc");o.querySelector("#agc").setAttribute("value",e),o.querySelector("#cnt").setAttribute("value",t.split("-")[0]),o.querySelector("#dac").setAttribute("value",t.split("-")[1]),o.submit()}function setOperatorCode(e){var t=document.getElementById("more-access-bankline-operator");t.querySelector("#operador").setAttribute("value",e),t.submit()}function setCPF(e){var t=document.getElementById("more-access-bankline-cpf"),o=e.replace(".","").replace(".","").replace("-","");t.querySelector("#usuariocpf").setAttribute("value",o),t.querySelector("#usuariocpffull").setAttribute("value",e),t.submit()}function openModal(){var e;moreAccessOpen&&moreAccessExpanded?closeModal():(isOpenMobileMenu()&&closeMobileMenu(),btnOpenZoom.ariaExpanded="true",modal.removeAttribute("aria-hidden"),modal.style.display="flex",moreAccessModule.classList.add("open"),document.body.style.overflow="hidden",generateFocusableItens(),document.getElementById("close-modal-more-access").focus(),moreAccessOpen=!0,moreAccessExpanded&&hideMain(),selectMoreAccess&&(e=new Event("change"),selectMoreAccess.dispatchEvent(e)),document.addEventListener("keydown",closeModalListener))}var closeModalListener=function(e){27==e.keyCode&&closeModal()};function closeModal(){modal.setAttribute("aria-hidden","true"),modal.style.display="none",moreAccessModule.classList.remove("open"),document.body.style.overflow="",moreAccessOpen=!1,btnOpenZoom.ariaExpanded="false";var e=document.getElementById("open_modal_more_access");e&&(e.focus(),e.onkeydown=null),showMain(),document.removeEventListener("keydown",closeModalListener)}function getFocusableModalLogin(e){return Array.from(e.querySelectorAll('button:not([tabindex^="-"]):not([disabled]), [href], area[href], input:not([type="hidden"]), textarea, select, iframe, [tabindex]:not([tabindex="-1"]):not([disabled])')).filter(function(e){return!e.closest("[hidden]")}).filter(function(e){return isVisible(e)})}function generateFocusableItens(){focusableLangModalItems=[];var e=document.querySelector(".idl-modal-more-access");(allFocusableModalItens=getFocusableModalLogin(e)).forEach(function(e,t){!isVisible(e)||"BUTTON"==e.tagName&&""==e.getAttribute("disabled")||focusableLangModalItems.push(e)}),focusableLangModalItems.forEach(function(e,t){0!==t||moreAccessExpanded?t!==focusableLangModalItems.length-1||moreAccessExpanded?e.onkeydown=null:e.onkeydown=function(e){!1===e.shiftKey&&9==e.keyCode&&(e.preventDefault(),focusFirstLangModalItem())}:e.onkeydown=function(e){e.shiftKey&&9==e.keyCode&&(e.preventDefault(),focusLastLangModalItem())}})}function isVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function focusFirstLangModalItem(){focusableLangModalItems[0].focus()}function focusLastLangModalItem(){focusableLangModalItems[focusableLangModalItems.length-1].focus()}function resetDisplay(){agencyMoreAccess.style.display="none",accountMoreAccess.style.display="none",operatorMoreAccess.style.display="none",cpfMoreAccess.style.display="none",moreAccessText.style.display="none",rememberContainerMoreAccess.style.display="block",agencyInputMoreAccess.required=!1,accountInputMoreAccess.required=!1,operatorInputMoreAccess.required=!1,cpfInputMoreAccess.required=!1,showInput()}function showInput(){switch(selectMoreAccess.value){case"agency-account":agencyMoreAccess.style.display="block",accountMoreAccess.style.display="block",agencyInputMoreAccess.required=!0,accountInputMoreAccess.required=!0,(7==accountInputMoreAccess.value.length&&4==agencyInputMoreAccess.value.length?activeButton:disableButton)(),accountInputMoreAccess.addEventListener("keyup",function(){(6==accountInputMoreAccess.value.replace("-","").length&&4==agencyInputMoreAccess.value.length?activeButton:disableButton)()}),agencyInputMoreAccess.addEventListener("keyup",function(){(7==accountInputMoreAccess.value.length&&4==agencyInputMoreAccess.value.length?activeButton:disableButton)()});break;case"operator":operatorMoreAccess.style.display="block",operatorInputMoreAccess.required=!0,(9==operatorInputMoreAccess.value.length?activeButton:disableButton)(),operatorInputMoreAccess.addEventListener("keyup",function(){(9==operatorInputMoreAccess.value.length?activeButton:disableButton)()});break;case"cpf":cpfMoreAccess.style.display="block",cpfInputMoreAccess.required=!0,(14==cpfInputMoreAccess.value.length?activeButton:disableButton)(),cpfInputMoreAccess.addEventListener("keyup",function(){(14==cpfInputMoreAccess.value.length?activeButton:disableButton)()});break;case"more-access":moreAccessText.style.display="block",rememberContainerMoreAccess.style.display="none",activeButton()}}function activeButton(){btnSubmit.ariaDisabled="false",btnSubmit.removeAttribute("disabled"),generateFocusableItens()}function disableButton(){"true"!=btnSubmit.ariaDisabled&&(btnSubmit.ariaDisabled="true",btnSubmit.setAttribute("disabled",""),generateFocusableItens())}function checkZoomModal(){var e=document.querySelector("body");100<=Math.round(100*window.devicePixelRatio)&&"desktop"==window["device-type"]&&window.innerWidth<1280||0<=["tablet-ipad"].indexOf(window["device-type"])&&e&&"private-bank"==e.getAttribute("data-segment")&&window.innerWidth<1280?(moreAccessModule.classList.add("more-access-expand"),moreAccessExpanded=!0,moreAccessOpen&&(hideMain(),generateFocusableItens()),modal.removeAttribute("role"),modal.removeAttribute("aria-modal"),modal.removeAttribute("tabindex")):(moreAccessModule.classList.remove("more-access-expand"),moreAccessExpanded=!1,modal.tabIndex=-1,modal.role="dialog",modal.ariaModal="true",moreAccessOpen&&(showMain(),generateFocusableItens()))}function isOpenMobileMenu(){return"true"==document.getElementById("idl-mobile-menu").dataset.open}function closeMobileMenu(){document.getElementById("idl-hamburguer-btn").click()}function hideMain(){main.style.display="none",footer.style.display="none"}function showMain(){main.style.display="block",footer.style.display="block"}function menuLogin(){var t=document.getElementById("idl-menu-account"),o=document.getElementById("idl-menu-agency"),n=document.getElementById("idl-menu-operator"),c=document.getElementById("idl-btn-login-lock"),a=document.getElementById("idl-btn-login-ok");n&&c&&a&&(n.addEventListener("keyup",function(e){9==e.keyCode&&e.preventDefault(),9==n.value.length?(c.style.display="none",a.style.display="flex",a.removeAttribute("disabled")):(c.style.display="flex",a.style.display="none",a.setAttribute("disabled","disabled"))}),a.addEventListener("click",function(e){e.preventDefault(),9==n.value.length&&menuLoginFormOp(n.value)})),t&&o&&c&&a&&(o.addEventListener("keyup",function(e){9==e.keyCode||16==e.keyCode?e.preventDefault():4==o.value.length&&e.target.selectionStart==e.target.value.length&&t.focus(),7==t.value.length&&4==o.value.length?(c.style.display="none",a.style.display="flex",a.removeAttribute("disabled")):(c.style.display="flex",a.style.display="none",a.setAttribute("disabled","disabled"))}),t.addEventListener("keyup",function(){6==t.value.replace("-","").length&&4==o.value.length?(c.style.display="none",a.style.display="flex",a.removeAttribute("disabled")):(c.style.display="flex",a.style.display="none",a.setAttribute("disabled","disabled"))}),a.addEventListener("click",function(e){e.preventDefault(),4==o.value.length&&7==t.value.length&&menuLoginForm(o.value,t.value)}))}function menuLoginForm(e,t){var o=document.querySelector('form[name="banklineAgConta"]');o.querySelector("#agc").setAttribute("value",e),o.querySelector("#cnt").setAttribute("value",t.split("-")[0]),o.querySelector("#dac").setAttribute("value",t.split("-")[1]),o.submit()}function menuLoginFormOp(e){var t=document.querySelector('form[name="banklineCodOperador"]');t.querySelector("#operador").setAttribute("value",e),t.submit()}function iTagger(){var t,o,n,e=document.getElementById("idl-more-access-select-login");e&&window.iTagger&&(t=window.iTagger,o=window.pageNameGA4,n=window.implementation_team,e.addEventListener("change",function(e){e=e.target.selectedOptions[0].textContent;e&&t.track({event_name:"click",parameters:{detail:"btn:more-access:"+window.SkewerCase(e,!0)+":acessar",custom_path:o,implementation_team:n}})}))}function onLoad(){initModalMoreAccess(),checkZoomModal(),menuLogin(),iTagger()}document.addEventListener("DOMContentLoaded",onLoad),window.addEventListener("resize",checkZoomModal);