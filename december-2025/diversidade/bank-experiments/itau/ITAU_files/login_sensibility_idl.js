Object.defineProperty(exports,"__esModule",{value:!0}),exports.deviceType=void 0,exports.initModalLoginSensibility=initModalLoginSensibility,exports.onLoad=onLoad,exports.onLoadSensibility=onLoadSensibility;var modalSensibility=document.getElementById("modal-login-login-sensibility"),loginSensibilityModule=document.getElementById("idl-login-sensibility"),allFocusableModalItens=[],focusableLangModalItems=[],loginSensibilityOpen=!1,loginSensibilityExpanded=!1,btnFocusSensibility=null,selectLoginSensibility=document.getElementById("idl-login-sensibility-select-login"),agencyLoginSensibility=document.getElementById("idl-login-sensibility-container-agency"),accountLoginSensibility=document.getElementById("idl-login-sensibility-container-account"),cpfLoginSensibility=document.getElementById("idl-login-sensibility-container-cpf"),operatorLoginSensibility=document.getElementById("idl-login-sensibility-container-operator"),agencyInputLoginSensibility=document.getElementById("idl-login-sensibility-input-agency"),accountInputLoginSensibility=document.getElementById("idl-login-sensibility-input-account"),cpfInputLoginSensibility=document.getElementById("idl-login-sensibility-input-cpf"),operatorInputLoginSensibility=document.getElementById("idl-login-sensibility-input-operator"),loginSensibilityText=document.getElementById("idl-login-sensibility-text"),rememberContainerLoginSensibility=document.getElementById("idl-login-sensibility-container-remember"),rememberInputLoginSensibility=document.getElementById("idl-login-sensibility-input-remember"),btnSubmit=document.getElementById("idl-login-sensibility-submit-button"),btnCloseModalLoginSensibility=document.getElementById("close-modal-login-sensibility"),loginSensibilityZoomButtonContainer=document.getElementById("idl-login-sensibility-zoom-container"),loginSensibilityZoomButton=document.getElementById("close-modal-login-sensibility-zoom"),moreAccessButton=document.getElementById("open-modal-more-access-zoom"),moreAcessButtonContainer=document.getElementById("idl-login-more-access"),main=document.getElementById("main"),footer=document.getElementById("footer");function initModalLoginSensibility(){moreAcessButtonContainer.appendChild(loginSensibilityZoomButtonContainer),moreAcessButtonContainer.appendChild(loginSensibilityModule),loginSensibilityZoomButton.addEventListener("click",closeModal),btnCloseModalLoginSensibility.addEventListener("click",closeModal),selectLoginSensibility.addEventListener("change",function(){generateFocusableItens(),resetDisplay()}),loadLocalStorage("agencia","idl-login-sensibility-input-agency","idl-login-sensibility-container-agency"),loadLocalStorage("conta","idl-login-sensibility-input-account","idl-login-sensibility-container-account"),loadLocalStorage("operador","idl-login-sensibility-input-operator","idl-login-sensibility-container-operator"),loadLocalStorage("cpf","idl-login-sensibility-input-cpf","idl-login-sensibility-container-cpf"),setTimeout(function(){var e=new Event("change");selectLoginSensibility.dispatchEvent(e)},100),btnSubmit.addEventListener("click",function(e){switch(e.preventDefault(),1==rememberInputLoginSensibility.checked?(localStorage.setItem("agencia",agencyInputLoginSensibility.value),localStorage.setItem("conta",accountInputLoginSensibility.value),localStorage.setItem("operador",operatorInputLoginSensibility.value),localStorage.setItem("cpf",cpfInputLoginSensibility.value)):0==rememberInputLoginSensibility.checked&&(localStorage.removeItem("agencia"),localStorage.removeItem("conta"),localStorage.removeItem("operador"),localStorage.removeItem("cpf")),selectLoginSensibility.value){case"agency-account":setAgency(agencyInputLoginSensibility.value,accountInputLoginSensibility.value);break;case"operator":setOperatorCode(operatorInputLoginSensibility.value);break;case"cpf":setCPF(cpfInputLoginSensibility.value);break;case"more-access":window.location.href="https://www.itau.com.br/servicos/mais-acessos";break;default:return!1}})}function loadLocalStorage(e,i,n){e=localStorage.getItem(e);e&&0<e.length&&(document.getElementById(i).value=e,document.getElementById(n).querySelector(".ids-form-field").classList.add("ids-form-field--value"))}function setAgency(e,i){var n=document.getElementById("login-sensibility-bankline-ag-cc");n.querySelector("#agc").setAttribute("value",e),n.querySelector("#cnt").setAttribute("value",i.split("-")[0]),n.querySelector("#dac").setAttribute("value",i.split("-")[1]),n.submit()}function setOperatorCode(e){var i=document.getElementById("login-sensibility-bankline-operator");i.querySelector("#operador").setAttribute("value",e),i.submit()}function setCPF(e){var i=document.getElementById("login-sensibility-bankline-cpf"),n=e.replace(".","").replace(".","").replace("-","");i.querySelector("#usuariocpf").setAttribute("value",n),i.querySelector("#usuariocpffull").setAttribute("value",e),i.submit()}function openModalSensibility(e,i,n){var t="desktop"!=(0,exports.deviceType)();n&&t||(t?window.open(e.url_app,"_blank"):loginSensibilityOpen&&loginSensibilityExpanded?closeModal():(isOpenMobileMenu()&&closeMobileMenu(),btnFocusSensibility=i,changeValuesSensibility(e),modalSensibility.removeAttribute("aria-hidden"),modalSensibility.style.display="flex",loginSensibilityModule.classList.add("open"),document.body.style.overflow="hidden",generateFocusableItens(),loginSensibilityOpen=!0,loginSensibilityExpanded?(hideMain(),hideButtonMoreAccess(),setTimeout(function(){loginSensibilityZoomButton.focus()},100)):btnCloseModalLoginSensibility.focus(),n=new Event("change"),selectLoginSensibility.dispatchEvent(n),document.addEventListener("keydown",closeModalListener)))}var closeModalListener=function(e){27==e.keyCode&&closeModal()};function closeModal(){modalSensibility.setAttribute("aria-hidden","true"),modalSensibility.style.display="none",loginSensibilityModule.classList.remove("open"),document.body.style.overflow="",loginSensibilityOpen=!1,btnFocusSensibility&&setTimeout(function(){btnFocusSensibility.focus()},100),showMain(),showButtonMoreAccess(),document.removeEventListener("keydown",closeModalListener)}function generateFocusableItens(){focusableLangModalItems=[],(allFocusableModalItens=document.querySelectorAll("#close-modal-login-sensibility, .idl-modal-login-sensibility .ids-input, .idl-modal-login-sensibility .ids-checkbox__input, #idl-login-sensibility-submit-button, .idl-login-sensibility.login-sensibility-expand.open .idl-login-sensibility-button-zoom")).forEach(function(e,i){!isVisible(e)||"BUTTON"==e.tagName&&""==e.getAttribute("disabled")||focusableLangModalItems.push(e)}),focusableLangModalItems.forEach(function(e,i){0!==i||loginSensibilityExpanded?i!==focusableLangModalItems.length-1||loginSensibilityExpanded?e.onkeydown=null:e.onkeydown=function(e){!1===e.shiftKey&&9==e.keyCode&&(e.preventDefault(),focusFirstLangModalItem())}:e.onkeydown=function(e){e.shiftKey&&9==e.keyCode&&(e.preventDefault(),focusLastLangModalItem())}})}function isVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function focusFirstLangModalItem(){focusableLangModalItems[0].focus()}function focusLastLangModalItem(){focusableLangModalItems[focusableLangModalItems.length-1].focus()}function resetDisplay(){agencyLoginSensibility.style.display="none",accountLoginSensibility.style.display="none",operatorLoginSensibility.style.display="none",cpfLoginSensibility.style.display="none",loginSensibilityText.style.display="none",rememberContainerLoginSensibility.style.display="block",agencyInputLoginSensibility.required=!1,accountInputLoginSensibility.required=!1,operatorInputLoginSensibility.required=!1,cpfInputLoginSensibility.required=!1,showInput()}function showInput(){switch(selectLoginSensibility.value){case"agency-account":agencyLoginSensibility.style.display="block",accountLoginSensibility.style.display="block",agencyInputLoginSensibility.required=!0,accountInputLoginSensibility.required=!0,(7==accountInputLoginSensibility.value.length&&4==agencyInputLoginSensibility.value.length?activeButton:disableButton)(),accountInputLoginSensibility.addEventListener("keyup",function(){(6==accountInputLoginSensibility.value.replace("-","").length&&4==agencyInputLoginSensibility.value.length?activeButton:disableButton)()}),agencyInputLoginSensibility.addEventListener("keyup",function(){(7==accountInputLoginSensibility.value.length&&4==agencyInputLoginSensibility.value.length?activeButton:disableButton)()});break;case"operator":operatorLoginSensibility.style.display="block",operatorInputLoginSensibility.required=!0,(9==operatorInputLoginSensibility.value.length?activeButton:disableButton)(),operatorInputLoginSensibility.addEventListener("keyup",function(){(9==operatorInputLoginSensibility.value.length?activeButton:disableButton)()});break;case"cpf":cpfLoginSensibility.style.display="block",cpfInputLoginSensibility.required=!0,(14==cpfInputLoginSensibility.value.length?activeButton:disableButton)(),cpfInputLoginSensibility.addEventListener("keyup",function(){(14==cpfInputLoginSensibility.value.length?activeButton:disableButton)()});break;case"more-access":loginSensibilityText.style.display="block",rememberContainerLoginSensibility.style.display="none",activeButton()}}function activeButton(){btnSubmit.ariaDisabled="false",btnSubmit.removeAttribute("disabled"),generateFocusableItens()}function disableButton(){"true"!=btnSubmit.ariaDisabled&&(btnSubmit.ariaDisabled="true",btnSubmit.setAttribute("disabled",""),generateFocusableItens())}function checkZoomModal(){100<=Math.round(100*window.devicePixelRatio)&&"desktop"==(0,exports.deviceType)()&&window.innerWidth<1280?(loginSensibilityModule.classList.add("login-sensibility-expand"),loginSensibilityExpanded=!0,loginSensibilityOpen&&(hideMain(),hideButtonMoreAccess(),generateFocusableItens()),modalSensibility.removeAttribute("role"),modalSensibility.removeAttribute("aria-modal"),modalSensibility.removeAttribute("tabindex")):(loginSensibilityModule.classList.remove("login-sensibility-expand"),loginSensibilityExpanded=!1,modalSensibility.tabIndex=-1,modalSensibility.role="dialog",modalSensibility.ariaModal="true",showButtonMoreAccess(),loginSensibilityOpen&&(showMain(),generateFocusableItens()))}var deviceType=function(){var e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"};function isOpenMobileMenu(){return"true"==document.getElementById("idl-mobile-menu").dataset.open}function closeMobileMenu(){document.getElementById("idl-hamburguer-btn").click()}function hideMain(){main.style.display="none",footer.style.display="none"}function showMain(){main.style.display="block",footer.style.display="block"}function onLoad(){initModalLoginSensibility(),checkZoomModal(),onLoadSensibility()}function onLoadSensibility(){var e=document.getElementById("loginSensibility");if(e||e.textContent)for(var i=JSON.parse(e.textContent).list,n=null!=location.hash?location.hash:null,t=document.getElementsByTagName("a"),o=0;o<t.length;o++)for(var l=0;l<i.length;l++)""!=t[o].href&&i[l].pf&&""!=i[l].pf.mkt_name&&t[o].href.includes(i[l].pf.mkt_name)?showModalEvent(i[l],t[o],n,"pf"):""!=t[o].href&&i[l].pj&&""!=i[l].pj.mkt_name&&t[o].href.includes(i[l].pj.mkt_name)&&showModalEvent(i[l],t[o],n,"pj")}function showModalEvent(e,i,n,t){var o=e[t],l=("pf"==(o.segment=t)&&(o.value2=""==o.value2?o.value1:o.value2,o.value3=""==o.value3?o.value1:o.value3),i);l.addEventListener("click",function(){openModalSensibility(o,l,!1)}),n==o.mkt_name&&openModalSensibility(o,i,!0)}function changeValuesSensibility(e){var i=modalSensibility.getElementsByTagName("input");document.getElementById("login-sensibility-bankline-ag-cc").action=e.segment&&"pf"==e.segment?"https://internetpf.itau.com.br/router-app/router":"https://internet.itau.com.br/router-app/router";for(var n=0;n<i.length;n++)"destino"==i[n].name&&e.segment&&"pf"==e.segment?i[n].value="SENS;SENS;"+e.value1+";"+e.value2+";"+e.value3:"destino"==i[n].name&&e.segment&&"pj"==e.segment&&(i[n].value=e.value)}function hideButtonMoreAccess(){moreAccessButton&&moreAccessButton.classList.add("ids-d-none"),loginSensibilityZoomButton&&(loginSensibilityZoomButtonContainer.classList.remove("ids-d-none"),loginSensibilityZoomButton.setAttribute("aria-expanded","true"))}function showButtonMoreAccess(){moreAccessButton&&moreAccessButton.classList.remove("ids-d-none"),loginSensibilityZoomButton&&(loginSensibilityZoomButtonContainer.classList.add("ids-d-none"),loginSensibilityZoomButton.setAttribute("aria-expanded","false"))}exports.deviceType=deviceType,document.addEventListener("DOMContentLoaded",onLoad),window.addEventListener("resize",checkZoomModal);