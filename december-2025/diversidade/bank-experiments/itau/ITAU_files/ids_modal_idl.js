Object.defineProperty(exports,"__esModule",{value:!0}),exports.showModal=showModal,exports.closeModal=closeModal,exports.hideModal=hideModal,exports.isVisible=isVisible,exports.getFocusableModalIDS=getFocusableModalIDS,exports.setFirstFocusElement=setFirstFocusElement,exports.checkIsElementToFocus=checkIsElementToFocus,exports.findFirstElementToFocus=findFirstElementToFocus,exports.tabFocusModalIDS=tabFocusModalIDS,exports.clickModal=clickModal,exports.hiddenBody=hiddenBody,exports.setPositionInitBody=setPositionInitBody,exports.modalStartOpen=modalStartOpen,exports.init=init;var modalIDSOpen=null,modalIDSButtonFocus=null;function showModal(t,e){var o=document.querySelector(e),o=(o.classList.remove("ids-d-none"),o.querySelector(".ids-modal"));o.setAttribute("aria-hidden","false"),/iPhone|iPad|iPod/i.test(navigator.userAgent)?o.removeAttribute("aria-modal"):o.setAttribute("aria-modal","true"),setFirstFocusElement(o),hiddenBody(-1),modalIDSButtonFocus=t.target,document.body.style.overflow="hidden",modalIDSOpen=e,fixIOSScroll(!0)}function closeModal(t){t=document.querySelector(t),t.classList.add("ids-d-none"),t=t.querySelector(".ids-modal");fixIOSScroll(!1),t.setAttribute("aria-hidden","true"),document.body.style.overflow="visible",hiddenBody(0),modalIDSButtonFocus&&modalIDSButtonFocus.focus(),modalIDSButtonFocus=modalIDSOpen=null}function hideModal(t,e){27==t.keyCode&&e&&closeModal(e)}function fixIOSScroll(t){var e=/iPhone|iPad|iPod/i.test(navigator.userAgent);e&&t?(document.body.style.position="fixed",document.body.style.top="-".concat(window.scrollY,"px")):e&&(t=document.body.style.top,document.body.style.position="",document.body.style.top="",window.scrollTo(0,-1*parseInt(t||"0")))}function isVisible(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length||""===t.style.opacity||0<parseFloat(t.style.opacity))}function getFocusableModalIDS(t){return function e(o,t){t=t||document;function n(t){e(o,t).forEach(function(t){d.includes(t)||d.push(t)})}var d=Array.from(t.querySelectorAll(o));t.shadowRoot&&n(t.shadowRoot);for(var i=0,a=Array.from(t.querySelectorAll("*"));i<a.length;i++){var l=a[i];l.shadowRoot&&n(l.shadowRoot)}return d}("*",t).filter(function(t){return!t.closest("[hidden]")}).filter(function(t){return isVisible(t)}).filter(function(t){return t.matches('button:not([tabindex^="-"]):not([disabled]), [href], area[href], input:not([type="hidden"]), textarea, select, iframe, [tabindex]:not([tabindex="-1"]):not([disabled])')&&t})}function setFirstFocusElement(t){var e=findFirstElementToFocus(t);e&&(e.setAttribute("tabindex","0"),e.focus(),setTimeout(function(){0<=["BUTTON","INPUT","TEXTAREA","A","SELECT","SUMMARY"].indexOf(e.tagName)?e.removeAttribute("tabindex"):e.setAttribute("tabindex","-1")},300))}function checkIsElementToFocus(t){var e=0<=["BUTTON","INPUT","TEXTAREA","A","SELECT","SUMMARY"].indexOf(t.tagName)||"0"==t.getAttribute("tabindex"),t="true"!==t.getAttribute("aria-hidden");return e&&t}function findFirstElementToFocus(t){var e=Array.from(t.children);return e.length?e.reduce(function(t,e){return checkIsElementToFocus(t)?t:checkIsElementToFocus(e)?e:"true"!==e.getAttribute("aria-hidden")&&e.firstChild?findFirstElementToFocus(e):t},t):t}function tabFocusModalIDS(t,e){var o,n,d,e=document.querySelector(e);9===t.keyCode&&e&&!e.classList.contains("ids-d-none")&&(n=getFocusableModalIDS(e),d=t.target,d=n.indexOf(d),t.shiftKey?e.contains(t.target)&&0!=d||(t.preventDefault(),null!=(o=n[n.length-1])&&o.focus()):e.contains(t.target)&&d!=n.length-1||(t.preventDefault(),null!=(o=n[0])&&o.focus()))}function clickModal(t){t&&t.target&&t.target.dataset&&t.target.dataset.modal?showModal(t,t.target.dataset.modal):t&&t.target&&t.target.parentNode.dataset&&t.target.parentNode.dataset.modal?showModal(t,t.target.parentNode.dataset.modal):t&&t.target&&t.target.closest(".idl-modal-dialog")&&(t.target.classList.contains("idl-close-modal")||t.target.parentNode.classList.contains("idl-close-modal"))?closeModal("#"+(modalIDSOpen=t.target.closest(".idl-modal-dialog").id)):t&&t.target&&t.target.classList.contains("ids-backdrop")&&closeModal("#"+t.target.id)}function hiddenBody(e){var t=document.getElementById("header-wrapper"),o=document.getElementById("footer"),o=[document.getElementById("main"),o,t],n=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);o.map(function(t){null!=t&&-1==e?(t.setAttribute("tabindex","-1"),n&&t.setAttribute("aria-hidden","true")):t&&(t.removeAttribute("tabindex"),n)&&t.setAttribute("aria-hidden","false")})}function setPositionInitBody(){var e,t=document.querySelectorAll(".idl-modal-dialog");0<t.length&&((e=document.createElement("div")).classList.add("ids-cmsless","idl-dialog-elements"),t.forEach(function(t){e.appendChild(t)}),document.body.insertAdjacentElement("afterbegin",e)),document.querySelectorAll(".main .idl-modal-dialog").forEach(function(t){t.innerHTML=""})}function modalStartOpen(){var t=document.querySelectorAll(".idl-modal-dialog:not(.ids-d-none)");t&&t[0]&&showModal(null,modalIDSOpen="#"+t[0].id)}function init(){setPositionInitBody(),modalStartOpen(),document.addEventListener("click",function(t){clickModal(t)}),window.addEventListener("show-modal",function(t){showModal(t,t.detail.modalID)}),window.addEventListener("keydown",function(t){modalIDSOpen&&(hideModal(t,modalIDSOpen),tabFocusModalIDS(t,modalIDSOpen))})}document.addEventListener("DOMContentLoaded",init);